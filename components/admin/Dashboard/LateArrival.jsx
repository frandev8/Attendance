import AddIcon from "@mui/icons-material/Add";
import MovingIcon from "@mui/icons-material/Moving";
import PeopleIcon from "@mui/icons-material/People";
import Link from "@mui/material/Link";
import Typography from "@mui/material/Typography";
import { useQuery } from "@tanstack/react-query";
import { Spin } from "antd";
import * as React from "react";
import { fetchAttendanceSummary } from "../../../utils/http";
import styles from "./Employees.module.css";
import Title from "./Title";

function preventDefault(event) {
  event.preventDefault();
}

export default function LateArrival() {
  const { data, isPending } = useQuery({
    queryKey: ["attendance", { type: "late" }],
    queryFn: () => fetchAttendanceSummary({ late: true }),
  });

  return (
    <React.Fragment>
      <div style={{ display: "flex", justifyContent: "space-between" }}>
        {isPending ? (
          <Spin />
        ) : data ? (
          <Typography component="p" variant="h4">
            {data?.length}
          </Typography>
        ) : (
          <Typography component="p" variant="h4">
            0
          </Typography>
        )}
        <div className={styles.iconAvatar}>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="23"
            height="19"
            viewBox="0 0 23 19"
            fill="none"
          >
            <g clipPath="url(#clip0_106_362)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M9.1885 0.558395C10.6776 0.278534 12.2214 0.263096 13.7182 0.513098C15.215 0.763101 16.6308 1.27287 17.8724 2.00881C19.1139 2.74475 20.153 3.69016 20.9212 4.78275C21.6894 5.87533 22.1692 7.09029 22.3291 8.34757C22.3572 8.56886 22.278 8.79034 22.1089 8.96329C21.9398 9.13623 21.6946 9.24648 21.4273 9.26976C21.16 9.29305 20.8925 9.22747 20.6836 9.08746C20.4748 8.94744 20.3416 8.74446 20.3135 8.52317C20.1398 7.15707 19.5022 5.85966 18.4746 4.78121C17.447 3.70277 16.0714 2.88742 14.5071 2.42962C12.9429 1.97182 11.254 1.8903 9.63604 2.19449C8.01812 2.49868 6.53739 3.17615 5.36536 4.14842C4.19334 5.12068 3.37799 6.34796 3.01375 7.68809C2.64951 9.02823 2.75129 10.4264 3.3073 11.7206C3.86331 13.0148 4.8508 14.1521 6.15538 15.0008C7.45996 15.8495 9.02825 16.3748 10.6786 16.5159C10.8119 16.5262 10.9414 16.5583 11.0597 16.6103C11.178 16.6622 11.2826 16.7331 11.3676 16.8188C11.4526 16.9045 11.5162 17.0033 11.5548 17.1094C11.5933 17.2156 11.6061 17.327 11.5924 17.4373C11.5786 17.5476 11.5386 17.6545 11.4747 17.7519C11.4107 17.8493 11.3241 17.9352 11.2197 18.0047C11.1154 18.0742 10.9955 18.1259 10.8669 18.1568C10.7383 18.1877 10.6036 18.1972 10.4705 18.1847C7.92121 17.9675 5.54805 17.0074 3.77463 15.4756C2.00121 13.9438 0.94296 11.9401 0.788757 9.82215C0.634554 7.70417 1.39444 5.60973 2.93277 3.91268C4.47111 2.21563 6.68779 1.02641 9.18715 0.557276L9.1885 0.558395ZM11.581 3.69129C11.8497 3.69129 12.1074 3.77967 12.2975 3.93699C12.4875 4.0943 12.5942 4.30767 12.5942 4.53016V10.4022H7.19047C6.92175 10.4022 6.66404 10.3139 6.47402 10.1565C6.28401 9.99922 6.17726 9.78585 6.17726 9.56336C6.17726 9.34088 6.28401 9.12751 6.47402 8.9702C6.66404 8.81288 6.92175 8.7245 7.19047 8.7245H10.5678V4.53016C10.5678 4.30767 10.6746 4.0943 10.8646 3.93699C11.0546 3.77967 11.3123 3.69129 11.581 3.69129ZM14.5801 11.7668C14.7701 11.6097 15.0276 11.5215 15.2961 11.5215C15.5646 11.5215 15.8221 11.6097 16.0121 11.7668L18.3357 13.6906L20.6593 11.7668C20.7521 11.6844 20.8639 11.6183 20.9882 11.5724C21.1125 11.5266 21.2467 11.5019 21.3827 11.4999C21.5188 11.4979 21.6539 11.5187 21.7801 11.5609C21.9062 11.603 22.0208 11.6658 22.117 11.7455C22.2132 11.8252 22.2891 11.92 22.3401 12.0245C22.391 12.1289 22.416 12.2408 22.4136 12.3535C22.4112 12.4661 22.3815 12.5772 22.3261 12.6801C22.2707 12.783 22.1909 12.8756 22.0913 12.9524L19.7677 14.8762L22.0913 16.8C22.1909 16.8768 22.2707 16.9694 22.3261 17.0723C22.3815 17.1752 22.4112 17.2863 22.4136 17.3989C22.416 17.5116 22.391 17.6234 22.3401 17.7279C22.2891 17.8324 22.2132 17.9272 22.117 18.0069C22.0208 18.0866 21.9062 18.1494 21.7801 18.1915C21.6539 18.2337 21.5188 18.2545 21.3827 18.2525C21.2467 18.2505 21.1125 18.2258 20.9882 18.18C20.8639 18.1341 20.7521 18.068 20.6593 17.9856L18.3357 16.0618L16.0121 17.9856C15.9193 18.068 15.8075 18.1341 15.6832 18.18C15.5589 18.2258 15.4247 18.2505 15.2887 18.2525C15.1527 18.2545 15.0175 18.2337 14.8914 18.1915C14.7652 18.1494 14.6506 18.0866 14.5544 18.0069C14.4582 17.9272 14.3823 17.8324 14.3314 17.7279C14.2804 17.6234 14.2554 17.5116 14.2578 17.3989C14.2602 17.2863 14.29 17.1752 14.3453 17.0723C14.4007 16.9694 14.4806 16.8768 14.5801 16.8L16.9037 14.8762L14.5801 12.9524C14.3904 12.7951 14.2838 12.5819 14.2838 12.3596C14.2838 12.1373 14.3904 11.9241 14.5801 11.7668Z"
                fill="#0043FF"
              />
            </g>
            <defs>
              <clipPath id="clip0_106_362">
                <rect
                  width="21.615"
                  height="17.8959"
                  fill="white"
                  transform="translate(0.773438 0.335815)"
                />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>
      <Title>Late Arrival</Title>
      <div className={`tw-flex  tw-items-center`}>
        <div
          className={` tw-p-4 tw-w-[15px] tw-h-[15px] tw-rounded-[50%] tw-bg-regress-bg tw-flex tw-justify-center tw-items-center tw-mr-2`}
        >
          <MovingIcon className={`tw-text-regress-color tw-rotate-180`} />
        </div>
        <Typography color="text.secondary" sx={{ flex: 1, fontSize: "16px" }}>
          +3% Increase than yesterday
        </Typography>
      </div>
      {/* <div>
        <Link color="primary" href="#" onClick={preventDefault}>
          View balance
        </Link>
      </div> */}
    </React.Fragment>
  );
}
